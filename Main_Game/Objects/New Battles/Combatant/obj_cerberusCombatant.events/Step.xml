<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event category="STEP" id="0">
  <actions>
    <action id="603" library="1">
      <!--action name: Code-->
      <kind>CODE</kind>
      <allowRelative>false</allowRelative>
      <question>false</question>
      <canApplyTo>true</canApplyTo>
      <actionType>CODE</actionType>
      <functionName/>
      <relative>false</relative>
      <not>false</not>
      <appliesTo>.self</appliesTo>
      <arguments>
        <argument kind="STRING">if (!attackSelected)
{
    attackType = irandom(9);
    attackSelected = true;
}

if (attackType == 0)
{
    blockOneMetadata = obj_blockNetwork.blocks[x/64 - 1,y/64 - 1] mod 1000000;
    blockTwoMetadata = obj_blockNetwork.blocks[x/64 + 4,y/64 - 1] mod 1000000;
    blockThreeMetadata = obj_blockNetwork.blocks[x/64 - 1,y/64 + 4] mod 1000000;
    blockFourMetadata = obj_blockNetwork.blocks[x/64 + 4,y/64 + 4] mod 1000000;
    
    obj_blockNetwork.blocks[x/64 - 1,y/64 - 1] = 34 + blockOneMetadata;
    obj_blockNetwork.blocks[x/64 + 4,y/64 - 1] = 34 + blockTwoMetadata;
    obj_blockNetwork.blocks[x/64 - 1,y/64 + 4] = 34 + blockThreeMetadata;
    obj_blockNetwork.blocks[x/64 + 4,y/64 + 4] = 34 + blockFourMetadata;
}

if (attackType == 1)
{
    aD_x = 0;
    aD_y = 0;
    while (aD_x == 0 &amp;&amp; aD_y == 0)
    {
        aD_x = irandom(2)-1;
        aD_y = irandom(2)-1;
    }
    
    projectile = instance_create(x+aD_x*64,y+aD_y*64,obj_shadowball);
    projectile.hspeed = aD_x*8;
    projectile.vspeed = aD_y*8;
    
    attackType = -1;
}

if (instance_number(obj_shadowball) == 0 &amp;&amp; attackType == -1 &amp;&amp; hspeed == 0 &amp;&amp; vspeed == 0)
{
    INVUL = (floor((obj_blockNetwork.blocks[x/64,y/64] mod 1000000)/1000) != 0);
    attackCompleted = true;
}

if (attackType == -1 &amp;&amp; (x mod 64 == 0) &amp;&amp; (y mod 64 == 0) &amp;&amp; (hspeed != 0 || vspeed != 0))
{
    hspeed = 0;
    vspeed = 0;
}

if (changeBack)
{
    attackSelected = false;
    attackCompleted = false;
    changeBack = false;
    attackType = 2;
    instance_change(obj_cerberusIdle,false);
}
</argument>
      </arguments>
    </action>
  </actions>
</event>
